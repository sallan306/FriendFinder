<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reservation Page</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>
<body>

  <div class="container">

    <div class="jumbotron">
      <h1 class="text-center"><span class="fa fa-fire"></span> Kindling</h1>
      <hr>
      <h2 class="text-center">Find a spark for the fire!</h2>
      <br>

      <div class="text-center">
        <a href="/"><button class="btn btn-lg btn-default"><span class="fa fa-home"> Return to Main Menu</span></button></a>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">

        <!-- Reservation Page -->
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">Psychoanalytics Section:</h4>
                <p>In this section we will gague your unique personality 
                    identifiers to match you with the best possible person! Please
                    answer truthfully and be mindful of your answers. Good Luck!</p>
          </div>
          <div class="panel-body">

            <form role="form">

                <input class="form-control" id="userName" type="text" placeholder="Enter your name">
                <br>
                <input class="form-control" id="userLink" type="text" placeholder="Enter a link to a picture of yourself">
                <br>
                <h6>Do you like Nature?</h6>
                <select class="form-control form-control-sm" id="question1">
                    <option></option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Indifferent</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>
                <h6>Do you like science?</h6>
                <select class="form-control form-control-sm" id="question2">
                        <option></option>
                        <option value="1">Strongly Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3">Indifferent</option>
                        <option value="4">Agree</option>
                        <option value="5">Strongly Agree</option>
                </select>
                <h6>Do you like sports?</h6>
                <select class="form-control form-control-sm" id="question3">
                        <option></option>
                        <option value="1">Strongly Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3">Indifferent</option>
                        <option value="4">Agree</option>
                        <option value="5">Strongly Agree</option>
                </select>
                <h6>Do you like painting?</h6>
                <select class="form-control form-control-sm" id="question4">
                        <option></option>
                        <option value="1">Strongly Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3">Indifferent</option>
                        <option value="4">Agree</option>
                        <option value="5">Strongly Agree</option>
                </select>
                <h6>Do you like politics?</h6>
                <select class="form-control form-control-sm" id="question5">
                        <option></option>
                        <option value="1">Strongly Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3">Indifferent</option>
                        <option value="4">Agree</option>
                        <option value="5">Strongly Agree</option>
                </select>
                <h6>Do you like cooking?</h6>
                <select class="form-control form-control-sm" id="question6">
                        <option></option>
                        <option value="1">Strongly Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3">Indifferent</option>
                        <option value="4">Agree</option>
                        <option value="5">Strongly Agree</option>
                </select>
                <h6>Do you like comic books?</h6>
                <select class="form-control form-control-sm" id="question7">
                        <option></option>
                        <option value="1">Strongly Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3">Indifferent</option>
                        <option value="4">Agree</option>
                        <option value="5">Strongly Agree</option>
                </select>
                <h6>Do you like working out?</h6>
                <select class="form-control form-control-sm" id="question8">
                        <option></option>
                        <option value="1">Strongly Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3">Indifferent</option>
                        <option value="4">Agree</option>
                        <option value="5">Strongly Agree</option>
                </select>
                <h6>Do you like fantasy?</h6>
                <select class="form-control form-control-sm" id="question9">
                        <option></option>
                        <option value="1">Strongly Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3">Indifferent</option>
                        <option value="4">Agree</option>
                        <option value="5">Strongly Agree</option>
                </select>
                <h6>Do you like romance?</h6>
                <select class="form-control form-control-sm" id="question10">
                        <option></option>
                        <option value="1">Strongly Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3">Indifferent</option>
                        <option value="4">Agree</option>
                        <option value="5">Strongly Agree</option>   
                </select>


              <button type="submit" class="btn btn-primary submit">Submit</button>
            </form>

          </div>
        </div>

      </div>
    </div>


    <footer class="footer">
    </footer>

  </div>

</body>
</html>

<!-- BELOW CODE IS CRITICAL. IT HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->
<script type="text/javascript">

    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file
 

      $(".submit").on("click", function(event) {
        event.preventDefault();
        // if(     $('#question1').val() === '' || 
        //         $('#question2').val() === '' ||
        //         $('#question3').val() === '' ||
        //         $('#question4').val() === '' ||
        //         $('#question5').val() === '' ||
        //         $('#question6').val() === '' ||
        //         $('#question7').val() === '' ||
        //         $('#question8').val() === '' ||
        //         $('#question9').val() === '' ||
        //         $('#question10').val() === '') {
        //     console.log("fill in all of the answers dude")
        // }
        // else {
        // Here we grab the form elements
        var userInfo = {

        name: $('#userName').val(),
        image: $("#userLink").val(),
        question1: $('#question1').val(),
        question2: $("#question2").val(),
        question3: $("#question3").val(),
        question4: $("#question4").val(),
        question5: $("#question5").val(),
        question6: $("#question6").val(),
        question7: $("#question7").val(),
        question8: $("#question8").val(),
        question9: $("#question9").val(),
        question10: $("#question10").val(),
        };

        // console.log(newReservation);

        // This line is the magic. It"s very similar to the standard ajax function we used.
        // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
        // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
        // depending on if a tables is available or not.

        $.post("/api/reserve", userInfo,
          function(data) {

            // If a table is available... tell user they are booked.
            if (data) {
              alert("Profile information submitted!");
              console.log(data)
            }
            else {
                alert("data not submitted properly!")
            }
            //clear form fields

          });


        //}


      });

</script>
